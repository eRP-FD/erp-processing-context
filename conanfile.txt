#
# (C) Copyright IBM Deutschland GmbH 2021
# (C) Copyright IBM Corp. 2021
#

# Note to mac and windows users.
# Conan does not allow OS specific dependencies, but as we have those some manual changes to this file
# are required on Apple Macs and Windows PCs. Search for the following comments
#      Comment this line if you are building on Apple computers.
#      Comment this line if you are building on Win64 computers.
#      Comment this line if you are building on Windows computers.
# and comment out the whole line.
#
# Additional info for windows users concerning redis-plus-plus:
# - REDIS_PLUS_PLUS_HAS_STRING_VIEW is required to be set for redis to be used for erp-processing-context.
#   For this it is necessary to set the additional compiler option -Zc:__cplusplus both for compiling
#   the redis-plus-plus library as well as for the erp-processing-context file projects.
#   To compile the redis-plus-plus library open the solution "cmake_wrapper.sln" in directory
#   "/Users/<user>/.conan/data/redis-plus-plus/1.2.1/_/_/build/<package_version>/build_subfolder" and
#   set the addtional compile option -Zc:__cplusplus in tab "C++ compile options/command line".
#   In addition in the common configuration tab you need to select the "ISO C++17-Standard (/std:c++17)".
#   Afterwards rebuild the whole redis-wrapper solution.
#   If not automatically done by the build process (if you still get unresolved linker symbol errors pointing
#   to redis library) manually copy the redis++_static library from the build to the package folder.

[generators]
cmake

[options]
boost:bzip2=False
boost:header_only=True
gsl-lite:on_contract_violation=throw
glog:with_gflags=False
libpq:with_openssl=True
# To prevent zlib conflicts between libraries
libxml2:iconv=False
libxml2:zlib=False
tss:with_hardware_tpm=True

redis-plus-plus:fPIC=True  # Comment this line if you are building on Windows computers.
redis-plus-plus:shared=False
redis-plus-plus:with_tls=True

hiredis:fPIC=True          # Comment this line if you are building on Windows computers.
hiredis:shared=False
hiredis:with_ssl=True


[requires]
boost/1.74.0    # -> boost/1.75.0 has been released but is not yet available in conan-center
# date can be removed as soon as we use C++20
date/3.0.0
glog/0.4.0
gsl-lite/0.37.0
# for C14N
libxml2/2.9.12
openssl/1.1.1k
rapidjson/cci.20200410
magic_enum/0.7.2
# Enforce new version of zlib (not the previous @conan/stable one)
zlib/1.2.11
# needed by BACK END
# for postgres
libpqxx/7.2.1
hsmclient/0.8.1 # Comment this line if you are building on Apple computers.
tpmclient/0.8   # Comment this line if you are building on Win64 computers.
# database compression:
zstd/1.4.9

# force libpqxx to use a recent libpq version to allow for OpenSSL update
libpq/13.1

# needed for testing (LIBRARY, BACK END, CLIENT)
gtest/1.10.0

hiredis/1.0.0
redis-plus-plus/1.2.1

autoconf/2.71